(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const g of r.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&c(g)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();const j=e=>new Date(e).toLocaleDateString(),O=e=>{e.sort((t,n)=>n.rating-t.rating)},T=e=>{e.sort((t,n)=>t.rating-n.rating)},$=e=>{e.sort((t,n)=>{const c=new Date(t.registration_date.split(".").reverse().join("-"));return new Date(n.registration_date.split(".").reverse().join("-"))-c})},k=e=>{e.sort((t,n)=>{const c=new Date(t.registration_date.split(".").reverse().join("-")),s=new Date(n.registration_date.split(".").reverse().join("-"));return c-s})},x=(e,t,n)=>{e.classList.add("popup--open"),document.body.classList.add("no-scroll"),n.dataset.id=t},C=e=>{e.classList.remove("popup--open"),document.body.classList.remove("no-scroll")},A=e=>e.map(t=>`
<tr class="table__tr" data-id=${t.id}>
    <td class="table__cell table__cell--name">
        <span>${t.username}<span/>
    </td>
    <td class="table__cell">
        ${t.email}
    </td>
    <td class="table__cell">
        ${t.registration_date}
    </td>
    <td class="table__cell">
        ${t.rating}
    </td>
    <td class="table__cell">
      <button class="button table__cell-close" data-id=${t.id}></button>
    </td>
</tr>
`).join(""),H=async()=>fetch("https://5ebbb8e5f2cfeb001697d05c.mockapi.io/users",{method:"GET",redirect:"follow"}),U=async()=>{let e=[];return await H().then(t=>{if(!t.ok)throw new Error("Error");return t.json()}).then(t=>{e=t,e.forEach(n=>{n.registration_date=j(n.registration_date)})}).catch(t=>{console.log(t)}),e},E=document.querySelector(".table__content"),p=document.querySelector(".filter__rating"),v=document.querySelector(".filter__reg"),u=document.querySelector(".table__pagination"),y=document.querySelector(".search__input"),w=document.querySelector(".popup"),q=document.querySelector(".js-close"),S=document.querySelector(".js-delete"),m=document.querySelector(".js-clear"),I=async()=>{let e=await U(),t=5,n=0,c=null,s=!1,r=[];const g=()=>{y.value=""},l=async(o,a)=>{const i=a*t,d=i+t;return c=o.slice(i,d),E.innerHTML=`${A(c)}`,c},_=o=>{const a=Math.ceil(o.length/t);for(let i=0;i<a;i++){const d=document.createElement("li");d.classList.add("table__pagination-item"),d.textContent=i+1,u.appendChild(d),document.querySelectorAll(".table__pagination-item")[0].classList.add("active"),d.addEventListener("click",()=>{n=i,g(),s?(l(r,n),console.log(r)):l(e,n)})}};u==null||u.addEventListener("click",o=>{const a=o.target;a&&(a.classList.contains("active")||(document.querySelector(".table__pagination-item.active").classList.remove("active"),a.classList.add("active")))});const P=o=>{console.log("delete user");const a=e.findIndex(i=>i.id===o);a>-1&&e.splice(a,1),u.innerHTML="",y.value="",_(e),l(e,n)},M=o=>{n=0;let a=[],i=o.value.trim().toLowerCase();p.classList.remove("active"),v.classList.remove("active"),e.forEach(d=>{if(d.username.toLowerCase().includes(i)||d.email.toLowerCase().includes(i)){if(i!==""){a.push(d),u.innerHTML="",l(a,n),s=!0;const D=Math.ceil(a.length/t);for(let h=0;h<D;h++){const b=document.createElement("li");b.textContent=h+1,u.appendChild(b),b.classList.add("table__pagination-item"),document.querySelectorAll(".table__pagination-item")[0].classList.add("active"),b.addEventListener("click",()=>{n=h,l(a,n)})}return m.classList.remove("hide"),a&&s}i==""&&(u.innerHTML="",_(e),l(e,n),m.classList.add("hide"))}})};_(e),l(e,n),y.addEventListener("input",o=>{const a=o.target;M(a),console.log(a.value.trim().toLowerCase())});let L=0,f=0;p.addEventListener("click",()=>(L++,p.classList.add("active"),v.classList.remove("active"),m.classList.remove("hide"),r=[...e],L==1&&O(r),L==2&&(T(r),L=0),g(),l(r,n),s=!0,s)),v.addEventListener("click",()=>(f++,p.classList.remove("active"),v.classList.add("active"),m.classList.remove("hide"),r=[...e],f==1&&$(r),f==2&&(k(r),f=0),g(),l(r,n),s=!0,s)),E.addEventListener("click",o=>{const a=o.target.dataset.id;a&&x(w,a,S)}),q==null||q.addEventListener("click",()=>{C(w)}),S==null||S.addEventListener("click",o=>{const a=o.target.dataset.id;P(a),C(w),m.classList.add("hide"),p.classList.remove("active"),v.classList.remove("active")}),m==null||m.addEventListener("click",()=>{if(s)return y.value="",p.classList.remove("active"),v.classList.remove("active"),u.innerHTML="",E.innerHTML="",_(e),l(e,n),s=!1,m.classList.add("hide"),L=0,f=0,s})};document.addEventListener("DOMContentLoaded",I);
